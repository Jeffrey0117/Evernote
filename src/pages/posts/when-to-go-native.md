---
layout: ../../layouts/PostLayout.astro
title: 不是每個專案都需要跨平台
date: 2026-01-14T02:32
description: 跨平台聽起來很美好，寫一次到處跑。但現實是，你可能在三個平台上各踩一遍坑。
tags:
  - 開發觀念
  - 桌面應用
---

「寫一次，到處跑。」

這句話聽起來超級美好，對吧？

一份 code 就能跑 Windows、Mac、Linux，省時省力，完美。

**但現實是，你會在三個平台上各踩一遍坑。**

我做過幾個跨平台專案，每次都有這種感覺：明明是同一份 code，怎麼每個平台的問題都不一樣？

## 跨平台的隱藏成本

大家都在講跨平台的好處，很少人講成本。

讓我來講。

### 各平台的 Edge Case

第一次做跨平台，我天真地以為 `fs.readFile(path)` 就搞定了。

結果使用者回報：「你的 App 在 Windows 上打不開檔案。」

查了半天才發現，我 hard code 了 `/`，Windows 要用 `\`。

```javascript
// 錯誤寫法（只在某些平台能跑）
const configPath = './config/settings.json'

// 正確寫法（跨平台）
import path from 'path'
const configPath = path.join('.', 'config', 'settings.json')
```

這種「小問題」一個一個冒出來：

**字體渲染**：同一個字體，Mac 上漂亮，Windows 上像糊掉。
使用者會抱怨「你的 App 在 Mac 上好醜」。

**系統通知**：Windows 有 Toast Notification，Mac 有 Notification Center，Linux 看你用什麼桌面環境。

每一個都不難，但堆起來就是你的加班時間。

### 原生功能要寫 Bridge

跨平台框架能幫你處理的，只有最基本的東西。

想用系統的檔案對話框、存取剪貼簿、讀取系統設定？每個都要寫 Bridge（橋接層——跨平台框架和原生 API 之間的翻譯層）。

而且每個平台寫一份，然後你還要維護它們。

用 Tauri 的話要寫 Rust，用 Electron 的話要處理主進程和渲染進程的 IPC（Inter-Process Communication，進程間通訊）。
我在 [Tauri WebView 的各種坑](/Evernote/posts/tauri-webview-pitfalls) 裡面講過一些例子。

### Bug 要在三個平台測

這是最痛的。

使用者回報 bug：「我在 Windows 上會 crash。」

你打開 Mac 測，正常。
跟同事借 Windows 電腦測，正常。
問使用者要系統版本，發現是 Windows 11 22H2 的特定組合才會出問題。

**一個 bug 要測三個平台，每個平台還有不同版本。**

你有這個時間嗎？

## 踩了幾次坑之後，我悟了

做完第三個跨平台專案，我終於想通一件事：

**跨平台不是省時間，是把時間花在不同地方。**

原生開發要學三套技術，但每個平台的問題獨立。
跨平台只學一套技術，但三個平台的問題糾纏在一起。

這不是「跨平台 vs 原生」的選擇題，是「你想把時間花在哪」的選擇題。

## 什麼時候該原生

有些情況，原生開發反而更省時間。

### 只做一個平台

如果你的目標使用者 90% 都在 Windows，那幹嘛跨平台？

直接用 Windows 原生技術，省去所有跨平台的麻煩。

「但萬一以後要支援 Mac 呢？」

等真的有需求再說。
現在花時間處理跨平台問題，不如先把 Windows 版做好。

**YAGNI（You Aren't Gonna Need It）** — 不是 You Are a Genius, Need It，而是「你八成用不到」。
不是現在需要的東西，就先不要做。

### 效能敏感

如果你的應用對效能要求很高，跨平台框架的額外開銷就是問題。

[Electron](https://www.electronjs.org/) 跑一個瀏覽器，記憶體吃好幾百 MB。
[Tauri](https://tauri.app/) 好一點，但還是有 WebView（系統內建的瀏覽器引擎）的開銷。

像 Blender、DaVinci Resolve、大部分 Steam 遊戲都是原生開發，因為每一毫秒都是錢。

### 深度整合系統功能

如果你的應用需要跟系統深度整合，跨平台框架會讓你很痛苦。

像 Dropbox 的托盤圖示會顯示同步狀態，這種即時更新跨平台框架做起來很痛苦。
全域快捷鍵、檔案關聯、系統服務——這些東西每個平台都不一樣，跨平台框架只能給你最基本的抽象。

與其用跨平台框架然後寫一堆平台特定的 bridge，不如直接原生開發。

## 那什麼時候跨平台真的值得？

### 真的要三個平台都支援

如果你的目標使用者真的分散在 Windows、Mac、Linux，那跨平台是合理的選擇。

但不要因為「感覺以後可能會需要」就選跨平台。
要有實際的數據或需求。

### 團隊只會一種技術

如果團隊都是 Web 開發者，沒人會原生開發，那用 [Electron](https://www.electronjs.org/) 是務實的選擇。

讓人用熟悉的技術做事，比學新技術快得多。

[跨平台桌面方案，先搞懂在選什麼](/Evernote/posts/cross-platform-desktop-overview) 這篇有講各框架的選擇邏輯。

### 內部工具，不追求極致體驗

如果是做內部工具，使用者是自己同事，那跨平台夠用了。

內部工具的好處是：同事不會嫌你 App 吃 300MB 記憶體，遇到 bug 會直接跟你說，不會默默流失。

**內部工具追求的是快速解決問題，不是極致體驗。**

## 快速判斷表

| 情境 | 選擇 | 一句話理由 |
|------|------|------------|
| 使用者集中單一平台 | 原生 | 不需要為 10% 的人增加 100% 的成本 |
| 效能敏感（遊戲、影片） | 原生 | 每一毫秒都是錢 |
| 深度系統整合 | 原生 | 跨平台框架只給你最低公約數 |
| 真的要三平台 + 團隊會 Web | 跨平台 | 用熟悉的技術比學新的快 |
| 內部工具 | 跨平台 | 同事不會給你負評 |

## 我的選擇

我試過 Electron、Tauri、Qt，最後內部工具都用 [Qt](https://www.qt.io/) + Python。

不是因為 Qt 最強，是因為：

1. **Electron** 太肥，一個小工具吃 300MB 記憶體，同事會抱怨
2. **Tauri** 要學 Rust，我只是想做個內部工具，不想學新語言
3. **Qt + Python** 開發快，打包小，而且是真正的原生 UI

選工具不是選「最好」，是選「對我的情況最適合」。

詳細可以看 [Qt + Python 快速開發桌面應用](/Evernote/posts/qt-python-vibe-coding)。

**對外產品**：看情況。

如果目標使用者主要在一個平台，就做原生。
如果真的要跨平台，看團隊會什麼技術。

會 Web 就用 Electron，會 Rust 就用 Tauri，會 Dart 就用 [Flutter](https://flutter.dev/)。

選工具的邏輯跟選套件管理工具一樣，先搞清楚自己要什麼。
這點我在 [Python 套件管理工具怎麼選](/Evernote/posts/python-package-managers) 也講過。

---

跨平台聽起來很美好，但不是萬靈丹。

**先問自己：我真的需要跨平台嗎？**

如果答案是「不確定」，那就是不需要。

先把一個平台做好，其他的等有人抱怨再說。
